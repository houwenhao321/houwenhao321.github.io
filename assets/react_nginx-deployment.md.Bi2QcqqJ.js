import{_ as a,c as r,o as n,a2 as t}from"./chunks/framework.DRvQ3jNO.js";const x=JSON.parse('{"title":"Nginx部署项目以及代理和负载均衡介绍","description":"","frontmatter":{},"headers":[],"relativePath":"react/nginx-deployment.md","filePath":"react/nginx-deployment.md"}'),i={name:"react/nginx-deployment.md"};function o(l,e,d,h,s,p){return n(),r("div",null,[...e[0]||(e[0]=[t(`<h1 id="nginx部署项目以及代理和负载均衡介绍" tabindex="-1">Nginx部署项目以及代理和负载均衡介绍 <a class="header-anchor" href="#nginx部署项目以及代理和负载均衡介绍" aria-label="Permalink to &quot;Nginx部署项目以及代理和负载均衡介绍&quot;">​</a></h1><p>本篇介绍打包后的 vue 项目使用 nginx 部署到本地以及接口的反向代理和负载均衡。</p><h2 id="前置准备" tabindex="-1">前置准备 <a class="header-anchor" href="#前置准备" aria-label="Permalink to &quot;前置准备&quot;">​</a></h2><p>首先确保你已经：</p><ul><li>安装了Nginx</li><li>打包了Vue项目 (<code>npm run build</code>)</li></ul><h2 id="基本部署" tabindex="-1">基本部署 <a class="header-anchor" href="#基本部署" aria-label="Permalink to &quot;基本部署&quot;">​</a></h2><h3 id="_1-打包项目" tabindex="-1">1. 打包项目 <a class="header-anchor" href="#_1-打包项目" aria-label="Permalink to &quot;1. 打包项目&quot;">​</a></h3><p>bash npm run build</p><h3 id="_2-配置nginx" tabindex="-1">2. 配置Nginx <a class="header-anchor" href="#_2-配置nginx" aria-label="Permalink to &quot;2. 配置Nginx&quot;">​</a></h3><p>创建nginx配置文件：</p><p>nginx server { listen 80; server_name localhost; # 前端静态资源 location / { root /path/to/your/dist; index index.html; try_files $uri$uri/ /index.html; } }</p><h2 id="反向代理配置" tabindex="-1">反向代理配置 <a class="header-anchor" href="#反向代理配置" aria-label="Permalink to &quot;反向代理配置&quot;">​</a></h2><p>nginx server { listen 80; server_name localhost; # 前端静态资源 location / { root /path/to/your/dist; index index.html; try_files $uri$uri/ /index.html; }</p><pre><code># API反向代理
location /api/ {
    proxy_pass http://backend-server:3000/ ;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
</code></pre><p>}</p><h2 id="负载均衡配置" tabindex="-1">负载均衡配置 <a class="header-anchor" href="#负载均衡配置" aria-label="Permalink to &quot;负载均衡配置&quot;">​</a></h2><p>nginx upstream backend { server backend1.example.com weight=3; server backend2.example.com; server backend3.example.com backup; }</p><p>server { listen 80; location /api/ { proxy_pass <a href="http://backend" target="_blank" rel="noreferrer">http://backend</a> ; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; } }</p><h2 id="启动nginx" tabindex="-1">启动Nginx <a class="header-anchor" href="#启动nginx" aria-label="Permalink to &quot;启动Nginx&quot;">​</a></h2><p>bash</p><p>测试配置文件 nginx -t</p><p>启动Nginx nginx</p><p>重启Nginx nginx -s reload</p><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="_1-刷新页面404" tabindex="-1">1. 刷新页面404 <a class="header-anchor" href="#_1-刷新页面404" aria-label="Permalink to &quot;1. 刷新页面404&quot;">​</a></h3><p>确保配置了 <code>try_files $uri $uri/ /index.html;</code></p><h3 id="_2-接口跨域" tabindex="-1">2. 接口跨域 <a class="header-anchor" href="#_2-接口跨域" aria-label="Permalink to &quot;2. 接口跨域&quot;">​</a></h3><p>通过Nginx反向代理解决跨域问题</p><h3 id="_3-静态资源加载失败" tabindex="-1">3. 静态资源加载失败 <a class="header-anchor" href="#_3-静态资源加载失败" aria-label="Permalink to &quot;3. 静态资源加载失败&quot;">​</a></h3><p>检查静态资源路径配置是否正确</p>`,30)])])}const _=a(i,[["render",o]]);export{x as __pageData,_ as default};
